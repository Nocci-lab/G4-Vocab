<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ëã±Ê§ú4Á¥öÔΩúüêª Verbs-5 Quiz</title>

<style>
:root{
  --bg:#0f1220; --panel:#1b2040; --text:#eaf0ff; --muted:#aab4d6;
  --good:#20c997; --bad:#ff5d6c; --accent:#7c5cff;
  --shadow:0 12px 30px rgba(0,0,0,.35); --radius:20px;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:system-ui,"Noto Sans JP",sans-serif;
  background:radial-gradient(1200px 800px at 30% 20%, #232866, var(--bg));
  color:var(--text); min-height:100vh;
  display:flex; justify-content:center; padding:18px;
}
.app{width:min(1100px,100%); display:grid; gap:14px}

.topbar{
  display:flex; justify-content:space-between; align-items:center;
  background:rgba(255,255,255,.06);
  border-radius:var(--radius); padding:14px 18px;
  box-shadow:var(--shadow);
}
.bigTitle{font-size:32px; font-weight:900; letter-spacing:1.2px}
.topRight{display:flex; gap:10px}
.pill{
  background:rgba(255,255,255,.08);
  border-radius:999px; padding:8px 14px;
  font-weight:900;
}

.grid{display:grid; grid-template-columns:1.3fr .7fr; gap:14px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.card{
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.04));
  border-radius:var(--radius); box-shadow:var(--shadow);
}
.content{padding:18px}

.progressWrap{height:12px; background:rgba(255,255,255,.12); border-radius:999px; overflow:hidden}
.progress{height:100%; width:0%; background:linear-gradient(90deg,#7c5cff,#20c997); transition:.3s}

.qText{font-size:42px; font-weight:900; margin:14px 0}

.choices{display:grid; grid-template-columns:1fr 1fr; gap:12px}
@media(max-width:600px){.choices{grid-template-columns:1fr}}

.choice{
  padding:20px; border-radius:18px; border:none;
  background:rgba(255,255,255,.08);
  color:var(--text);
  font-size:26px; font-weight:900; cursor:pointer;
}
.choice.good{background:rgba(32,201,151,.25)}
.choice.bad{background:rgba(255,93,108,.25)}
.choice:disabled{opacity:.9}

.btn{
  border:none; border-radius:999px;
  padding:10px 18px; font-weight:900;
  background:rgba(124,92,255,.45);
  color:var(--text); cursor:pointer
}
.btn.secondary{background:rgba(255,255,255,.1)}

.bear{font-size:80px; margin:10px 0}
.bear.dance{animation:dance .4s infinite alternate}
@keyframes dance{
  from{transform:rotate(-8deg)}
  to{transform:rotate(8deg)}
}

.review{margin-top:14px; font-weight:800; line-height:1.6}
</style>
</head>

<body>
<div class="app">

<div class="topbar">
  <div class="bigTitle">üêª Verbs-5 ‚Äî Vocab Quiz</div>
  <div class="topRight">
    <div class="pill">‚è± <span id="time">3:00</span></div>
    <div class="pill">‚úÖ <span id="score">0</span> / <span id="total">6</span></div>
  </div>
</div>

<div class="grid">

<div class="card"><div class="content">
  <div class="progressWrap"><div class="progress" id="progress"></div></div>
  <div class="qText" id="qText">Press Start</div>
  <div class="choices" id="choices"></div>
  <div style="margin-top:14px">
    <button class="btn" id="startBtn">Start</button>
    <button class="btn secondary" id="restartBtn" disabled>Restart</button>
  </div>
</div></div>

<div class="card"><div class="content" style="text-align:center">
  <div class="bear" id="bear">üêª</div>
  <div id="reviewBox" class="review"></div>
</div></div>

</div>
</div>

<script>
(() => {

/* ===== WORD LIST ===== */
const WORDS = [
  { en: "stop",   ja: "„ÇÑ„ÇÅ„ÇãÔºèÊ≠¢„Åæ„Çã" },
  { en: "become", ja: "„Äú„Å´„Å™„Çã" },
  { en: "catch",  ja: "„Å§„Åã„Åæ„Åà„Çã" },
  { en: "put",    ja: "ÁΩÆ„Åè" },
  { en: "order",  ja: "Ê≥®Êñá„Åô„Çã" },
  { en: "sell",   ja: "Â£≤„Çã" },
  { en: "hurry",  ja: "ÊÄ•„Åê" },
  { en: "arrive", ja: "ÁùÄ„ÅèÔºèÂà∞ÁùÄ„Åô„Çã" },
  { en: "wear",   ja: "ÁùÄ„Å¶„ÅÑ„ÇãÔºèË∫´„Å´„Å§„Åë„Å¶„ÅÑ„Çã" },
  { en: "change", ja: "Â§â„Åà„ÇãÔºèÂ§â„Çè„Çã" },
  { en: "hope",   ja: "Êúõ„ÇÄÔºè„Äú„Å†„Å®„ÅÑ„ÅÑ„Å®ÊÄù„ÅÜ" },
  { en: "worry",  ja: "ÂøÉÈÖç„Åô„Çã" },
  { en: "try",    ja: "Ë©¶„ÅôÔºè„Äú„Åó„Çà„ÅÜ„Å®„Åô„Çã" },
  { en: "stop",  ja: "„ÇÑ„ÇÅ„ÇãÔºèÊ≠¢„Åæ„Çã" },
  { en: "sing",  ja: "Ê≠å„ÅÜ" },
  { en: "break", ja: "„Åì„Çè„ÅôÔºèÊäò„ÇãÔºè„Åì„Çè„Çå„Çã" },
  { en: "fall",  ja: "ËêΩ„Å°„ÇãÔºèËª¢„Å∂" },
  { en: "turn",  ja: "Âõû„ÅôÔºèÂõû„Çã" }
];

const LIMIT = 180;
let qs=[], qIndex=0, wrong=[], timer, remain, score=0;

/* ===== DOM ===== */
const qText=document.getElementById("qText");
const choices=document.getElementById("choices");
const progress=document.getElementById("progress");
const timeEl=document.getElementById("time");
const scoreEl=document.getElementById("score");
const totalEl=document.getElementById("total");
const bear=document.getElementById("bear");
const reviewBox=document.getElementById("reviewBox");
const startBtn=document.getElementById("startBtn");
const restartBtn=document.getElementById("restartBtn");

totalEl.textContent = WORDS.length;

/* ===== UTIL ===== */
const shuffle=a=>{
  for(let i=a.length-1;i>0;i--){
    const j=Math.random()*(i+1)|0;
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
};

function beep(freq){
  const ctx=new (window.AudioContext||window.webkitAudioContext)();
  const o=ctx.createOscillator(), g=ctx.createGain();
  o.frequency.value=freq;
  o.connect(g); g.connect(ctx.destination);
  g.gain.setValueAtTime(.001,ctx.currentTime);
  g.gain.exponentialRampToValueAtTime(.3,ctx.currentTime+.02);
  g.gain.exponentialRampToValueAtTime(.001,ctx.currentTime+.25);
  o.start(); o.stop(ctx.currentTime+.26);
  return o;
}

/* ===== BUILD ===== */
function build(){
  return shuffle([...WORDS]).map(w=>{
    const jp=Math.random()<.5;
    const p=jp?w.ja:w.en;
    const a=jp?w.en:w.ja;
    const w2=shuffle(WORDS.filter(x=>x!==w))
      .slice(0,3)
      .map(x=>jp?x.en:x.ja);
    return { p, a, o: shuffle([a,...w2]) };
  });
}

/* ===== RENDER ===== */
function render(){
  const q=qs[qIndex];
  qText.textContent=q.p;
  choices.innerHTML="";
  q.o.forEach(t=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=t;
    b.onclick=()=>pick(t,b,q);
    choices.appendChild(b);
  });
  progress.style.width=`${qIndex/qs.length*100}%`;
}

function pick(sel,btn,q){
  [...choices.children].forEach(b=>b.disabled=true);
  let osc;
  if(sel===q.a){
    score++;
    scoreEl.textContent=score;
    btn.classList.add("good");
    osc=beep(880);
  }else{
    btn.classList.add("bad");
    wrong.push(`${q.p} ‚Üí ${q.a}`);
    osc=beep(220);
  }
  osc.onended=()=>{
    qIndex++;
    qIndex<qs.length ? render() : finish();
  };
}

function finish(){
  clearInterval(timer);
  progress.style.width="100%";
  qText.textContent=`CLEAR! ${score} / ${WORDS.length}`;
  bear.textContent="üêªüéâ";
  bear.classList.add("dance");
  beep(1200);
  reviewBox.innerHTML = wrong.length
    ? "üìù „Åæ„Å°„Åå„Åà„ÅüÂçòË™û<br>"+wrong.join("<br>")
    : "üåü Perfect!";
}

function start(){
  clearInterval(timer);
  qs=build(); qIndex=0; wrong=[]; score=0;
  scoreEl.textContent=0;
  remain=LIMIT;
  timeEl.textContent="3:00";
  bear.textContent="üêª"; bear.classList.remove("dance");
  reviewBox.innerHTML="";
  startBtn.disabled=true; restartBtn.disabled=false;
  render();
  timer=setInterval(()=>{
    remain--;
    timeEl.textContent=
      `${Math.floor(remain/60)}:${String(remain%60).padStart(2,"0")}`;
    if(remain<=0)finish();
  },1000);
}

startBtn.onclick=start;
restartBtn.onclick=start;

})();
</script>
</body>
</html>
